<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.css">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.bundle.js"></script>

    <title>Preview, {{ bed }}, {{ date }}</title>
</head>
<body>

<h1 align="center"> {{ bed }}, {{ date }} </h1>

{% for device, val in data.items %}

    <h4 align="center"> {{ device }}, <a href="/download_csv_device?{{ val.csv_download_params | safe }}">Download CSV</a> </h4>

<canvas id="{{ device }}" class="chartjs" width="400" height="200"></canvas>

{% endfor %}

<script>

      {% for device, val in data.items %}

          new Chart(document.getElementById("{{ device }}"), {
              "type": "line",
              "data": {
                  "labels": [{{ val.timestamp | safe }}],
                  "datasets": [{{ val.dataset | safe }}]
              },
              "options": {
                  "scales": {
                      "xAxes": [{
                          "type": "time",
                          "time": {
                              "unit": "hour"
                          }
                      }]
                  },
                  "layout": {
                      padding: {
                          left: 10,
                          right: 10,
                          top: 10,
                          bottom: 10
                      }
                  }
              }
          });

      {% endfor %}

</script>

</body>
</html>